webpackJsonp([1],{"+Tmm":function(e,t){},"93P3":function(e,t){},BE3V:function(e,t){},DXQs:function(e,t){},I04N:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:24}},[a("el-menu",{attrs:{"default-active":this.$route.path,router:"",mode:"horizontal"}},e._l(e.navList,function(t,n){return a("el-menu-item",{key:n,attrs:{index:t.name}},[a("template",{slot:"title"},[a("span",[e._v(" "+e._s(t.navItem))])])],2)}),1)],1)],1)],1)},staticRenderFns:[]};var o={name:"app",components:{Menu:a("VU/8")({name:"Menu",data:function(){return{navList:[{name:"/dashboard",navItem:"总览"},{name:"/task_config",navItem:"任务"},{name:"/account_config",navItem:"账号"},{name:"/clan_config",navItem:"行会"}]}}},s,!1,function(e){a("ToMU")},"data-v-856bf132",null).exports}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{height:"100%"},attrs:{id:"app"}},[t("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[t("el-header",{staticStyle:{"border-bottom":"solid 1px #e6e6e6",height:"61px"}},[t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:2,offset:1}},[t("el-avatar",{attrs:{size:59,shape:"square",fit:"fit",src:"/static/favicon.ico"}})],1),this._v(" "),t("el-col",{attrs:{span:5}},[t("p",{staticStyle:{"text-align":"left","margin-top":"20px"}},[this._v("Princess Connection Farm")])]),this._v(" "),t("el-col",{attrs:{span:15}},[t("Menu")],1)],1)],1),this._v(" "),t("el-main",{staticStyle:{padding:"0","background-color":"#f6f8fa"}},[t("el-row",[t("el-col",{attrs:{span:16,offset:4}},[t("el-container",[t("el-main",[t("router-view")],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(e){a("I04N")},null,null).exports,i=a("/ocq"),c=a("//Fk"),u=a.n(c),d=a("mtWM"),m=a.n(d);function f(e,t){return new u.a(function(a,n){m.a.get(e,{params:t}).then(function(e){a(e.data)}).catch(function(e){n(e)})})}function p(e,t){return new u.a(function(a,n){m.a.post(e,t).then(function(e){a(e.data)}).catch(function(e){n(e)})})}function h(e,t){return new u.a(function(a,n){m.a.put(e,t).then(function(e){a(e.data)}).catch(function(e){n(e)})})}function b(e,t){return new u.a(function(a,n){m.a.delete(e,t).then(function(e){a(e.data)}).catch(function(e){n(e)})})}m.a.defaults.baseURL="http://127.0.0.1:5000/api",m.a.defaults.timeout=5e3,m.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",m.a.interceptors.response.use(function(e){return 200===e.status?u.a.resolve(e):u.a.reject(e)});var v=function(){return f("/task")},k={name:"TaskConfig",data:function(){return{tableData:[],search:"",dialogCreateFormVisible:!1,createForm:{taskname:""},dialogUpdateFormVisible:!1,updateForm:{index:null,row:{taskname:"",accounts:"",subtasks:{tasks:[]},newSubtask:""}},subtaskSchema:{}}},mounted:function(){this.refreshTableData()},methods:{handleCreate:function(e){var t=this;(function(e){return p("/task",{taskname:e})})(e).then(function(a){t.$notify({title:"创建成功",message:e,type:"success"}),t.dialogCreateFormVisible=!1,t.refreshTableData()}).catch(function(e){e.response&&e.response.status?t.$notify({title:e.response.data.msg,message:"",type:"error"}):t.$notify({title:e,message:"",type:"error"})})},handleStartEdit:function(e,t){this.updateForm.index=e,this.updateForm.row=t,console.log(this.updateForm.row),this.dialogUpdateFormVisible=!0},addSubtask:function(){for(var e=this.updateForm.row.newSubtask,t={type:e},a=this.subtaskSchema[e].params,n=0;n<a.length;n++)t[a[n].key]=null;this.updateForm.row.subtasks.tasks.push(t),this.updateForm.row.newSubtask="",console.log(t)},deleteSubtask:function(e){console.log(this.updateForm.row.subtasks.tasks),this.updateForm.row.subtasks.tasks.splice(e,1)},handleSubmitEdit:function(){var e,t,a=this;console.log(this.updateForm.row),(e=this.updateForm.row.taskname,t=this.updateForm.row.subtasks,h("/task/"+e,{subtask:t})).then(function(e){a.$notify({title:"更新成功",message:a.updateForm.row.taskname,type:"success"}),a.dialogUpdateFormVisible=!1,a.refreshTableData()}).catch(function(e){e.response&&e.response.status?a.$notify({title:e.response.data.msg,message:"",type:"error"}):a.$notify({title:e,message:"",type:"error"})})},handleCancelEdit:function(){console.log(this.updateForm.row),this.dialogUpdateFormVisible=!1},handleDelete:function(e,t){var a,n=this;(a=t.taskname,b("/task/"+a)).then(function(e){n.$notify({title:"删除成功",message:t.taskname,type:"success"}),n.refreshTableData()}).catch(function(e){e.response&&e.response.status?n.$notify({title:e.response.data.msg,message:"",type:"error"}):n.$notify({title:e,message:"",type:"error"})})},preHandleDelete:function(e,t){},handleSelectionChange:function(e){this.multipleSelection=e},refreshTableData:function(){var e=this;v().then(function(t){console.log(t),e.tableData=t.data}).catch(function(t){e.tableData=[{taskname:"mana号任务",accounts:"张三,罗某"},{taskname:"装备号任务",accounts:"某翔,韩立"},{taskname:"大号任务",accounts:"咕噜灵波"}],e.$notify({title:"后端未启动, 加载演示数据",message:t,type:"success"})}),f("/subtask/schema").then(function(t){for(var a=t.data,n=0;n<a.length;n++)e.subtaskSchema[a[n].abbr]=a[n],e.subtaskSchema[a[n].abbr].value=a[n].abbr,e.subtaskSchema[a[n].abbr].label=a[n].abbr+"("+a[n].title+")";console.log(t),console.log("load schema"),console.log(e.subtaskSchema)})}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){e.dialogCreateFormVisible=!0}}},[e._v("新增\n        ")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加任务",visible:e.dialogCreateFormVisible},on:{"update:visible":function(t){e.dialogCreateFormVisible=t},close:function(){e.dialogCreateFormVisible=!1,e.createForm={taskname:""}}}},[a("el-form",{attrs:{model:e.createForm}},[a("el-form-item",{attrs:{label:"任务名"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.createForm.taskname,callback:function(t){e.$set(e.createForm,"taskname",t)},expression:"createForm.taskname"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(){e.dialogCreateFormVisible=!1,e.createForm={taskname:""}}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCreate(e.createForm.taskname)}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑任务",visible:e.dialogUpdateFormVisible,width:"80%"},on:{"update:visible":function(t){e.dialogUpdateFormVisible=t},close:function(t){return e.handleCancelEdit()}}},[a("el-form",{attrs:{model:e.updateForm}},[a("el-form-item",{attrs:{label:"任务名"}},[a("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.updateForm.row.taskname,callback:function(t){e.$set(e.updateForm.row,"taskname",t)},expression:"updateForm.row.taskname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关联账号"}},[a("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.updateForm.row.accounts,callback:function(t){e.$set(e.updateForm.row,"accounts",t)},expression:"updateForm.row.accounts"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"子任务列表"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.updateForm.row.subtasks.tasks,stripe:""}},[a("el-table-column",{attrs:{prop:"type",label:"ID",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"名称",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.subtaskSchema[t.row.type].title)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.subtaskSchema[t.row.type].desc)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.subtaskSchema[t.row.type].params.length>0?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subtaskSchema[t.row.type].params,stripe:""}},[a("el-table-column",{attrs:{prop:"key",label:"变量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"key_type",label:"类型",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"名称",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"描述",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{label:"值"},scopedSlots:e._u([{key:"default",fn:function(n){return["bool"!==n.row.key_type?a("el-input",{model:{value:t.row[n.row.key],callback:function(a){e.$set(t.row,n.row.key,a)},expression:"scope.row[scope1.row.key]"}}):e._e(),e._v(" "),"bool"===n.row.key_type?a("el-switch",{attrs:{"active-text":"True","inactive-text":"False"},model:{value:t.row[n.row.key],callback:function(a){e.$set(t.row,n.row.key,a)},expression:"scope.row[scope1.row.key]"}}):e._e()]}}],null,!0)})],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.deleteSubtask(t.$index)}}})]}}])})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"添加子任务"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateForm.row.newSubtask,callback:function(t){e.$set(e.updateForm.row,"newSubtask",t)},expression:"updateForm.row.newSubtask"}},e._l(e.subtaskSchema,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""},on:{click:function(t){return e.addSubtask()}}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleCancelEdit()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmitEdit()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter(function(t){return!e.search||t.taskname.toLowerCase().includes(e.search.toLowerCase())||t.accounts.toLowerCase().includes(e.search.toLowerCase())}),stripe:""},on:{"selection-change":e.handleSelectionChange}},[e._v("\n      >\n      "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"任务",prop:"taskname"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联账号 (开发中)",prop:"accounts"}}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"任务/关联账号"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleStartEdit(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),a("el-popconfirm",{attrs:{title:"确定删除这个任务吗？"},on:{onConfirm:function(a){return e.handleDelete(t.$index,t.row)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(a){return e.preHandleDelete(t.$index,t.row)}},slot:"reference"},[e._v("删除\n            ")])],1)]}}])})],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(k,w,!1,function(e){a("DXQs")},"data-v-41959b6f",null).exports,g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-container",[t("el-main",[t("p",[this._v("建设中...")]),this._v(" "),t("p",[this._v("这是首页, 总览 Princess Connection Farm")])])],1)],1)},staticRenderFns:[]};var y=a("VU/8")({name:"Dashboard"},g,!1,function(e){a("R3+A")},"data-v-7790a3a0",null).exports,F={name:"AccountConfig",data:function(){return{tableData:[],search:"",dialogFormVisible:!1,form:{username:"",password:"",taskname:""},taskname_options:[],value:""}},mounted:function(){this.refreshTableData(),this.refreshTasknameOptions()},methods:{handleCreate:function(e,t,a){var n=this;(function(e,t,a){return p("/account",{username:e,password:t,taskname:a})})(e,t,a).then(function(a){n.$notify({title:"创建成功",message:e+"/"+t,type:"success"}),n.dialogFormVisible=!1,n.refreshTableData()}).catch(function(e){e.response&&e.response.status?n.$notify({title:e.response.data.msg,message:"",type:"error"}):n.$notify({title:e,message:"",type:"error"})})},handleStartEdit:function(e,t){t.edit=!t.edit},handleCancelEdit:function(e,t){t.edit=!t.edit,t.password="********"},handleSubmitEdit:function(e,t){var a,n,s,o=this;t.edit=!t.edit,(a=t.username,n=t.password,s=t.taskname,h("/account/"+a,{password:n,taskname:s})).then(function(e){o.$notify({title:"修改成功",message:t.username+"/"+t.password+"/"+t.taskname,type:"success"}),o.refreshTableData()}).catch(function(e){e.response&&e.response.status?o.$notify({title:e.response.data.msg,message:"",type:"error"}):o.$notify({title:e,message:"",type:"error"})})},handleDelete:function(e,t){var a,n=this;(a=t.username,b("/account/"+a)).then(function(e){n.$notify({title:"删除成功",message:t.username,type:"success"}),n.refreshTableData()}).catch(function(e){e.response&&e.response.status?n.$notify({title:e.response.data.msg,message:"",type:"error"}):n.$notify({title:e,message:"",type:"error"})})},preHandleDelete:function(e,t){},handleSelectionChange:function(e){this.multipleSelection=e},refreshTasknameOptions:function(){var e=this,t=this;v().then(function(e){for(var a=[],n=0;n<e.data.length;n++)a.push({value:e.data[n].taskname,label:e.data[n].taskname});t.taskname_options=a}).catch(function(a){t.taskname_options=[{value:"mana号任务",label:"mana号任务"},{value:"装备号任务",label:"装备号任务"},{value:"大号任务",label:"大号任务"}],e.$notify({title:"后端未启动, 加载演示数据",message:a,type:"success"})})},refreshTableData:function(){var e=this,t=this;f("/account").then(function(e){console.log(e);for(var a=0;a<e.data.length;a++)e.data[a].edit=!1;t.tableData=e.data}).catch(function(a){t.tableData=[{username:"张三",password:"********",taskname:"mana号任务",tags:"大号,1会",edit:!1},{username:"罗某",password:"********",taskname:"mana号任务",tags:"大号,1会",edit:!1},{username:"某翔",password:"********",taskname:"装备号任务",tags:"农场,1会",edit:!1},{username:"韩立",password:"********",taskname:"装备号任务",tags:"农场,2会",edit:!1},{username:"咕噜灵波",password:"********",taskname:"大号任务",tags:"农场,2会",edit:!1}],e.$notify({title:"后端未启动, 加载演示数据",message:a,type:"success"})})}}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增\n        ")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加账户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(){e.dialogFormVisible=!1,e.form={username:"",password:""}}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.taskname,callback:function(t){e.$set(e.form,"taskname",t)},expression:"form.taskname"}},e._l(e.taskname_options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(){e.dialogFormVisible=!1,e.form={username:"",password:"",taskname:""}}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCreate(e.form.username,e.form.password,e.form.taskname)}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter(function(t){return!e.search||t.username.toLowerCase().includes(e.search.toLowerCase())||t.taskname.toLowerCase().includes(e.search.toLowerCase())||t.tags.toLowerCase().includes(e.search.toLowerCase())}),stripe:""},on:{"selection-change":e.handleSelectionChange}},[e._v("\n      >\n      "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),e._v(" "),a("el-table-column",{attrs:{label:"密码",prop:"password"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{staticClass:"edit-input",attrs:{size:"mini"},model:{value:t.row.password,callback:function(a){e.$set(t.row,"password",a)},expression:"scope.row.password"}}):e._e(),e._v(" "),t.row.edit?e._e():a("span",[e._v(e._s(t.row.password))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务",prop:"taskname"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.row.taskname,callback:function(a){e.$set(t.row,"taskname",a)},expression:"scope.row.taskname"}},e._l(e.taskname_options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e(),e._v(" "),t.row.edit?e._e():a("span",[e._v(e._s(t.row.taskname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"标签 (开发中)",prop:"tags"}}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"用户名/任务/标签"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[t.row.edit?e._e():a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleStartEdit(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),t.row.edit?e._e():a("el-popconfirm",{attrs:{title:"确定删除这个用户吗？"},on:{onConfirm:function(a){return e.handleDelete(t.$index,t.row)}}},[t.row.edit?e._e():a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(a){return e.preHandleDelete(t.$index,t.row)}},slot:"reference"},[e._v("删除\n            ")])],1),e._v(" "),t.row.edit?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleSubmitEdit(t.$index,t.row)}}},[e._v("确定\n          ")]):e._e(),e._v(" "),t.row.edit?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleCancelEdit(t.$index,t.row)}}},[e._v("取消\n          ")]):e._e()]}}])})],1)],1)],1)},staticRenderFns:[]};var C=a("VU/8")(F,S,!1,function(e){a("+Tmm")},"data-v-1fdd67f7",null).exports,$={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-container",[t("el-main",[t("p",[this._v("建设中...")]),this._v(" "),t("p",[this._v("这是配置页, 在此对行会等进行配置")])])],1)],1)},staticRenderFns:[]};var x=a("VU/8")({name:"ClanConfig"},$,!1,function(e){a("BE3V")},"data-v-4cfe4a9f",null).exports;n.default.use(i.a);var D=new i.a({mode:"history",routes:[{path:"/",redirect:"/account_config"},{path:"/dashboard",name:"Dashboard",component:y},{path:"/task_config",name:"TaskConfig",component:_},{path:"/account_config",name:"AccountConfig",component:C},{path:"/clan_config",name:"ClanConfig",component:x}]}),V=a("zL8q"),T=a.n(V);a("93P3");n.default.use(T.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:D,components:{App:l},template:"<App/>"})},"R3+A":function(e,t){},ToMU:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.da06caea6633779497d3.js.map